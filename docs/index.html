<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Phonetic Alphabet Converter converts a string into NATO phonetic alphabet words."
    />
    <title>Phonetic Alphabet Converter</title>

    <!-- normalize -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />

    <!-- MDC Web styles -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"
    />

    <!-- Custom styles -->
    <style>
      main {
        display: block;
        padding: 0 1rem;
        margin: 0 auto;
        max-width: 37.5rem; /* 600px */
      }

      .mdc-typography--headline2 {
        font-size: 2.75rem;
        line-height: 2.75rem;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <main>
      <!-- Render headline -->
      <h1 class="mdc-typography--headline2">Phonetic Alphabet Converter</h1>

      <!-- Render textfield -->
      <div
        class="mdc-text-field mdc-text-field--fullwidth mdc-text-field--no-label"
      >
        <input
          type="text"
          class="mdc-text-field__input"
          placeholder="Convert text to NATO phonetic alphabet"
          aria-label="Convert text to NATO phonetic alphabet"
          autofocus
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
        />
      </div>
      <br />

      <!-- Render words -->
      <div class="mdc-chip-set"></div>
    </main>

    <!-- MDC Web JS -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>

    <!-- Local library -->
    <script src="../umd/phonetic-alphabet-converter.js"></script>

    <!-- Custom JS -->
    <script>
      if (window.PhoneticAlphabetConverter) {
        main();
      } else {
        var script = document.createElement('script');
        script.src =
          'https://unpkg.com/phonetic-alphabet-converter@latest/umd/phonetic-alphabet-converter.js';
        script.addEventListener('load', main);
        document.head.appendChild(script);
      }

      function main() {
        var MDCChipSet = mdc.chips.MDCChipSet;
        var chipSet = document.querySelector('.mdc-chip-set');

        // Instantiate single textfield component rendered in the document
        mdc.textField.MDCTextField.attachTo(
          document.querySelector('.mdc-text-field')
        );

        /**
         * @param {string} text
         * @return {string}
         */
        function generateChipMarkup(text) {
          var html = '<span class="mdc-chip__text">' + text + '</span>';
          html += '<div class="mdc-chip__ripple"></div>';
          html = '<div class="mdc-chip">' + html + '</div>';
          return html;
        }

        // Convert input to NATO phonetic alphabet text
        document
          .querySelector('input')
          .addEventListener('input', function(event) {
            var text = event.target.value;
            var words = PhoneticAlphabetConverter(text);
            var chips = words.map(function(word) {
              return word ? generateChipMarkup(word) : null;
            });
            chipSet.innerHTML = chips.join('');
            new MDCChipSet(chipSet);
          });
      }
    </script>

    <!--
      GitHub Corners: https://github.com/remarkablemark/github-corners
    -->
    <script
      src="https://unpkg.com/github-corners/dist/embed.min.js"
      data-href="https://github.com/remarkablemark/phonetic-alphabet-converter"
      data-target="_blank"
      async
      defer
    ></script>
  </body>
</html>
